# T002: Create useUiStore with Type Definitions

**Type**: BE-TEST (Core Implementation)
**Priority**: High - foundation for all UI state
**State**: pending

---

## Business Summary

Centralize UI filter and overlay state into a single typed Zustand store with actions.

---

## Logic

Create `stores/useUiStore.ts` with:
- State: 4 filters + 3 overlay flags
- Actions: setters, clearAllFilters(), applyPinnedView(view), modal helpers

---

## Technical Logic

1. Create `stores/` directory if not exists
2. Create `stores/useUiStore.ts`:

```typescript
import { create } from 'zustand';
import type { SortKey } from '@/lib/bookmarks';
import type { SpaceSelection } from '@/components/spaces/SpacesSidebar';
import type { PinnedView } from '@/lib/types';

interface UiState {
  // Filters
  selectedSpaceId: SpaceSelection;
  searchQuery: string;
  selectedTag: string;
  sortKey: SortKey;
  
  // Overlays
  isFormOpen: boolean;
  isImportExportOpen: boolean;
  isSpacesOpen: boolean;
}

interface UiActions {
  // Filter setters
  setSelectedSpaceId: (id: SpaceSelection) => void;
  setSearchQuery: (query: string) => void;
  setSelectedTag: (tag: string) => void;
  setSortKey: (key: SortKey) => void;
  
  // Overlay setters
  setIsFormOpen: (open: boolean) => void;
  setIsImportExportOpen: (open: boolean) => void;
  setIsSpacesOpen: (open: boolean) => void;
  
  // Composite actions
  clearAllFilters: () => void;
  applyPinnedView: (view: PinnedView) => void;
  
  // Convenience helpers
  openForm: () => void;
  closeForm: () => void;
  openImportExport: () => void;
  closeImportExport: () => void;
  openSpaces: () => void;
  closeSpaces: () => void;
}

type UiStore = UiState & UiActions;

export const useUiStore = create<UiStore>((set) => ({
  // Initial state
  selectedSpaceId: 'all',
  searchQuery: '',
  selectedTag: 'all',
  sortKey: 'newest',
  isFormOpen: false,
  isImportExportOpen: false,
  isSpacesOpen: false,
  
  // Filter setters
  setSelectedSpaceId: (id) => set({ selectedSpaceId: id }),
  setSearchQuery: (query) => set({ searchQuery: query }),
  setSelectedTag: (tag) => set({ selectedTag: tag }),
  setSortKey: (key) => set({ sortKey: key }),
  
  // Overlay setters
  setIsFormOpen: (open) => set({ isFormOpen: open }),
  setIsImportExportOpen: (open) => set({ isImportExportOpen: open }),
  setIsSpacesOpen: (open) => set({ isSpacesOpen: open }),
  
  // Composite actions
  clearAllFilters: () => set({
    searchQuery: '',
    selectedTag: 'all',
    sortKey: 'newest',
    // Note: selectedSpaceId is NOT cleared
  }),
  
  applyPinnedView: (view) => set({
    selectedSpaceId: view.spaceId as SpaceSelection,
    searchQuery: view.searchQuery,
    selectedTag: view.tag,
    sortKey: view.sortKey,
  }),
  
  // Convenience helpers
  openForm: () => set({ isFormOpen: true }),
  closeForm: () => set({ isFormOpen: false }),
  openImportExport: () => set({ isImportExportOpen: true }),
  closeImportExport: () => set({ isImportExportOpen: false }),
  openSpaces: () => set({ isSpacesOpen: true }),
  closeSpaces: () => set({ isSpacesOpen: false }),
}));
```

---

## Testing

Unit tests will be written in T003-T005.
Manual verification: Import store in a component, verify TypeScript types work.

---

## Files

- `stores/useUiStore.ts` (new)

---

## Patterns

Similar structure to `hooks/useBookmarks.ts` but using Zustand instead of Context + reducer.

---

## Dependencies

- **Blocks**: T003, T004, T005, T006, T007
- **Blocked By**: T001

---

## Acceptance Criteria

- [ ] Store created with all 7 state properties
- [ ] All 17 actions implemented
- [ ] TypeScript types correct (no any types)
- [ ] Default values match epic spec
- [ ] `clearAllFilters` preserves selectedSpaceId
- [ ] `applyPinnedView` correctly maps PinnedView to store state
