# T006: Create Hydration-Safe Store Wrapper

**Type**: FE (Infrastructure)
**Priority**: High - prevents SSR hydration errors
**State**: pending

---

## Business Summary

Ensure Zustand store only initializes on client side to avoid SSR mismatch errors.

---

## Logic

Create a wrapper that ensures store reads happen only after client hydration.

---

## Technical Logic

Option 1: Client-only initialization pattern (recommended)

Modify `stores/useUiStore.ts` to include a hydration guard:

```typescript
import { create } from 'zustand';
// No storage middleware needed since we're not persisting

// Store is safe for SSR because:
// 1. Default values are static (no window/document access)
// 2. No localStorage reads during initialization
// 3. Store is created once, not recreated on every render

// The store will initialize with defaults on server
// Client will use same defaults (no persistence = no mismatch)

export const useUiStore = create<UiStore>((set) => ({
  // ... rest of store implementation from T002
}));
```

**Why this is safe:**
- Default values (`all`, `""`, `"newest"`, `false`) are primitives
- No dynamic initialization based on window/document
- No localStorage reads during store creation
- Client and server will render identical initial state

If persistence is added later, a hydration wrapper will be needed.

---

## Testing

Manual verification:
- Build and start app
- Check browser console for hydration errors
- No "Hydration failed" or "Text content did not match" errors

---

## Files

- `stores/useUiStore.ts` (modify - ensure hydration safety)

---

## Patterns

Follow existing `useBookmarks` hydration pattern in `hooks/useBookmarks.ts:110-117`.

---

## Dependencies

- **Blocks**: T007
- **Blocked By**: T002

---

## Acceptance Criteria

- [ ] Store initializes without SSR hydration errors
- [ ] No console errors on page load
- [ ] Default values render correctly on server and client
