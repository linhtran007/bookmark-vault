# T009 - Wire E2E Pull Apply into `hooks/useSyncEngineUnified.ts`

**Type**: FE
**State**: pending
**Phase**: Phase B - Client E2E Pull/Apply Pipeline

## Business Summary
Make `syncPull()` in E2E mode actually update local app state across devices.

## Logic
Right now `hooks/useSyncEngineUnified.ts` calls `encryptedPull()` but does not persist/apply pulled records. This task wires the pipeline:

1. Pull ciphertext from cloud via `lib/sync-engine.ts`
2. Persist ciphertext locally (background pull)
3. If vault is unlocked, decrypt and apply into normal storages

## Technical Logic
- In the `syncMode === 'e2e'` branch:
  - Call `encryptedPull()` and capture `records` (depends on T006).
  - Store records in encrypted local storage utilities (depends on T007).
  - If `isUnlocked && vaultKey`, call `decryptAndApplyPulledE2eRecords(vaultKey)` (depends on T008).
  - Trigger UI refresh (existing data refresh store).

## Testing
Jest test (lightweight):
- Mock `encryptedPull()` to return a record.
- Mock the decrypt/apply util.
- Assert decrypt/apply is called only when unlocked.

## Files
- **Modify**: `hooks/useSyncEngineUnified.ts`

## Patterns
- Reference plaintext pull/apply flow in `hooks/useSyncEngineUnified.ts`.

## Dependencies
- T006 (encrypted pull returns records)
- T007 (ciphertext persistence)
- T008 (decrypt/apply util)
