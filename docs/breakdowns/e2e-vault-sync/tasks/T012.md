# T012 - Add Blocked Sync Dialog (Revert / Delete / Cancel)

**Type**: FE
**State**: pending
**Phase**: Phase C - Plaintext Mode Blocking (Decision A)

## Business Summary
When plaintext sync is blocked due to leftover encrypted cloud data, show a modal explaining why and offer recovery actions:
- Revert (requires passphrase)
- Delete encrypted cloud data (danger confirm)
- Cancel

## Logic
Render a dialog whenever plaintext sync detects `encryptedRecordCount > 0` (via `POST /api/vault/disable` verify).

User actions:
- **Revert**: prompt for passphrase and invoke existing `hooks/useVaultDisable.ts` flow.
- **Delete encrypted cloud data**: show a secondary danger confirmation, then call `POST /api/vault/disable` with `{ action: 'delete-encrypted', passphrase }` (or whatever the endpoint expects) and re-check presence.
- **Cancel**: close dialog and keep plaintext sync blocked.

## Technical Logic

### Component
Create `components/sync/BlockedSyncDialog.tsx` (client component) that accepts:
- `open: boolean`
- `encryptedRecordCount: number`
- callbacks: `onRevert(passphrase)`, `onDeleteEncrypted(passphrase)`, `onCancel()`

Use existing UI primitives from `components/ui` (Modal/Dialog patterns used elsewhere).

### Error Handling
- Show toasts for failed verify/delete/revert.
- Keep the dialog open on failure so the user can retry.

## Testing
- Jest component test:
  - renders count and warnings
  - calls provided callbacks on button click

## Files
- **Create**: `components/sync/BlockedSyncDialog.tsx`

## Dependencies
- T011 (detection logic exists)

## Notes
This component should be UI-only; the blocking decision and network calls should live in the unified engine/hook.
