# T001 - Fix Plaintext Push Mode Invariants

**Type**: BE
**State**: pending
**Phase**: Phase A - Server Correctness

## Business Summary
Ensure plaintext push enforces `encrypted=false` and clears `ciphertext` column to prevent hybrid rows.

## Logic
Modify `/api/sync/plaintext/push/route.ts` to explicitly set `encrypted=false` and `ciphertext=NULL` on both insert and update operations.

## Technical Logic

### Current Issue
Lines 62-65 (INSERT) and 70-76 (UPDATE) do not enforce mode invariants.

### Changes Required

**INSERT statement (line 62-65)**:
```typescript
// Before:
INSERT INTO records (user_id, record_id, record_type, data, encrypted, version, deleted)
VALUES ($1, $2, $3, $4, false, 1, $5)

// After: explicitly set ciphertext to NULL
INSERT INTO records (user_id, record_id, record_type, data, encrypted, ciphertext, version, deleted)
VALUES ($1, $2, $3, $4, false, NULL, 1, $5)
```

**UPDATE statement (line 70-76)**:
```typescript
// Before:
UPDATE records
SET data = $1, version = version + 1, deleted = $2, updated_at = NOW()
WHERE id = $3

// After: explicitly clear ciphertext and set encrypted=false
UPDATE records
SET data = $1, encrypted = false, ciphertext = NULL, version = version + 1, deleted = $2, updated_at = NOW()
WHERE id = $3
```

## Testing
Backend test - verify after push:
- `encrypted = false`
- `ciphertext IS NULL`
- `data IS NOT NULL`

## Files
- **Modify**: `app/api/sync/plaintext/push/route.ts`

## Patterns
- Reference existing INSERT/UPDATE structure in same file
- Reference T002 for encrypted counterpart

## Dependencies
- None (can start immediately)
